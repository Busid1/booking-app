<div class="bg-white shadow-md rounded-lg p-6">
  <h3 class="text-2xl font-bold text-gray-900 mb-4">Servicios</h3>
  <table class="w-full shadow text-sm text-left rtl:text-right">
    <thead class="text-xs text-gray-800 uppercase bg-gray-200">
      <tr>
        <th scope="col" class="px-6 py-3">Nombre del servicio</th>
        <th scope="col" class="px-6 py-3">Duración</th>
        <th scope="col" class="px-6 py-3">Precio</th>
        <th scope="col" class="px-6 py-3">Acción</th>
      </tr>
    </thead>

    <tbody>
      @for(service of allServices; track service.id){
      <tr class="bg-gray-50 border-b last:border-b-0 hover:bg-gray-100 transition">
        <th scope="row" class="px-6 inline-flex items-center gap-4 py-4 font-medium">
          @if(service.image){
          <img class="w-16 h-16 shadow-md object-cover rounded" src="{{service.image}}" alt="{{service.title}}">
          }
          {{service.title}}
        </th>

        <td class="px-6 py-4">{{service.duration}} min</td>
        <td class="px-6 py-4">{{service.price | currency:'EUR'}}</td>

        <td class="flex flex-wrap gap-3 px-6 py-4">
          @if(isAdmin()){
          <button data-modal-target="updateServiceModal" data-modal-toggle="updateServiceModal"
            (click)="handleActiveModal(service.id ?? '')"
            class="text-white bg-orange-600 hover:bg-orange-700 focus:ring-4 focus:outline-none focus:ring-orange-200 font-medium rounded-lg text-sm px-4 py-2.5 text-center transition"
            type="button">
            <i class="fas fa-pencil-alt"></i>
          </button>

          <button type="button" (click)="handleDeleteService(service.id ?? '')"
            class="text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:ring-red-200 font-medium rounded-lg text-sm px-4 py-2.5 transition">
            <i class="fas fa-trash-alt"></i>
          </button>

          } @else {
          <button type="button" (click)="handleActiveModal(service.id ?? '')"
            class="bg-blue-500 shadow hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition">
            Pedir cita
          </button>
          }
        </td>
      </tr>
      }
    </tbody>
  </table>
</div>

@if(isLoadingModal){
<div class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center">
  <div class="animate-spin rounded-full h-12 w-12 border-t-8 border-blue-500"></div>
</div>
}

<app-update-service [serviceFormData]="serviceFormData!" (closeModal)="handleCloseModal()"></app-update-service>
<app-booking></app-booking>
