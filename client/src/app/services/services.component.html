<div class="bg-white rounded-xl shadow-lg p-8 max-sm:px-5">
  <div class="text-center mb-8">
    <h2 class="text-3xl font-bold text-gray-800 mb-4">Nuestros Servicios</h2>
    <p class="text-gray-600 max-w-2xl mx-auto">
      Descubre nuestra amplia gama de servicios profesionales dise√±ados para cuidar tu bienestar y belleza
    </p>
  </div>

  @if(!isLoadingServices){
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    @for(service of allServices; track service.id){
    <div
      class="group relative bg-white rounded-xl border-2 transition-all duration-300 hover:shadow-xl hover:-translate-y-1 cursor-pointer border-gray-200 hover:border-blue-300">

      <div class="relative overflow-hidden rounded-t-xl">
        <img class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"
          src="{{service.image ? service.image : 'https://www.svgrepo.com/show/508699/landscape-placeholder.svg'}}"
          alt="{{service.title}}">
      </div>

      <div class="p-6">
        <div class="flex items-start justify-between mb-3">
          <h3 class="text-xl font-semibold text-gray-800 group-hover:text-blue-600 transition-colors truncate">
            {{service.title}}
          </h3>
        </div>

        <p class="text-gray-600 text-sm mb-4 line-clamp-2">
          {{service.description}}
        </p>

        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4 text-sm text-gray-500">
            <div class="flex items-center gap-1">
              <i class="fas fa-clock w-4 h-4"></i>
              <span>{{service.duration}} min</span>
            </div>
            <div class="flex items-center gap-1">
              <span class="font-semibold text-gray-800">{{service.price | currency:'EUR'}}</span>
            </div>
          </div>
        </div>

        <div class="flex justify-end gap-6 mt-6">
          @if(isAdmin()){
          <button data-modal-target="updateServiceModal" data-modal-toggle="updateServiceModal"
            (click)="handleActiveModal(service.id ?? '')" type="button">
            <i class="fas fa-pencil-alt text-blue-600 text-lg"></i>
          </button>

          <button type="button" (click)="handleDeleteService(service.id ?? '')">
            <i class="fas fa-trash-alt text-red-600 text-lg"></i>
          </button>
          } @else {
          <button type="button" (click)="handleActiveModal(service.id ?? '')"
            class="bg-blue-600 text-sm flex items-center gap-2 justify-center font-medium w-full whitespace-nowrap shadow hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition">
            <i class="fas fa-calendar-plus"></i> Pedir cita
          </button>
          }
        </div>
      </div>
    </div>
    }
    @if(isAdmin()){
    <app-admin-buttons></app-admin-buttons>
    }
  </div>

  @if(isLoadingServices){
  <span>No hay servicios</span>
  }
  } @else {
  <div class="animate-spin rounded-full h-10 w-10 border-t-8 border-blue-500 mx-auto"></div>
  }
</div>

@if(isLoadingModal){
<div class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center">
  <div class="animate-spin rounded-full h-12 w-12 border-t-8 border-blue-500"></div>
</div>
}

<app-update-service [serviceFormData]="serviceFormData!" (closeModal)="handleCloseModal()"></app-update-service>
<app-booking></app-booking>